container_commands:
  restore_default_crontable:
    command: crontab -r
    leader_only: true

  create_cronjob:
    command: echo "*/15 * * * * /usr/bin/python3 /opt/python/current/app/application.py" > /tmp/cronjob && chmod 666 /tmp/cronjob && crontab /tmp/cronjob && cat /tmp/cronjob >> /opt/python/log/collector.log && who >> /opt/python/log/collector.log && ls -al /opt/python/current/app/ >> /opt/python/log/collector.log && ls -al /opt/python/log/collector.log >> /opt/python/log/collector.log
    leader_only: true

  log_structure:
    command: find /opt/python/current/ >> /opt/python/log/collector.log
    leader_only: true

  log_pip_list:
    command: pip3 list >> /opt/python/log/collector.log
    leader_only: true

  log_user:
    command: echo "$(who)" >> /opt/python/log/collector.log
    leader_only: true

  delete_cronjob_file:
    command: rm /tmp/cronjob
    leader_only: true
